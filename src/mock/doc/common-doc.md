# 1.获取个人信息接口

- [x] 前端已完成
- [ ] 后端已完成

- **接口说明**: 用于用户获取个人信息
- **请求地址**: `getInfo`
- **请求方式**: `GET`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
用户ID|userId|string|是|-

返回值名| 返回值 | 说明
:-|:-:|:-
code|返回码|可能值：1001,2001,2002,4001
msg|信息|成功获取个人信息/未登录账户/无权限访问该用户的信息/内部错误，请联系管理员
data|数据|登录成功：name、email.若登录失败则为null
&emsp;email|用户邮箱|
&emsp;name|用户姓名|

## 返回值示例

```json
{
  "code":1001,
  "msg":"成功获取个人信息",
  "data":{
    "email":"1@1.com",
    "name":"myName"
  }
}
```

# 2.修改个人信息接口

- [x] 前端已完成
- [ ] 后端已完成

- **接口说明**: 用于用户修改个人信息
- **请求地址**: `changeInfo`
- **请求方式**: `POST`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
用户ID|userId|string|是|-
用户姓名|name|string|是|-
用户邮箱|email|string|是|-

返回值名| 返回值 | 说明
:-|:-:|:-
code|返回码|可能值：1001,2001,2002,4001
msg|信息|成功修改个人信息/未登录账户/无权限访问该用户的信息/内部错误，请联系管理员

## 返回值示例

```json
{
  "code":1001,
  "msg":"成功修改个人信息"
}
```

# 3.修改个人密码接口

- [x] 前端已完成
- [ ] 后端已完成

- **接口说明**: 用于用户修改个人信息
- **请求地址**: `changePwd`
- **请求方式**: `POST`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
用户ID|userId|string|是|-
用户原密码|passwdOld|string|是|-
用户新密码|passwdNew|string|是|-

返回值名| 返回值 | 说明
:-|:-:|:-
code|返回码|可能值：1001,2001,2002,4001
msg|信息|成功修改个人密码/未登录账户/无权限访问该用户的信息/内部错误，请联系管理员

## 返回值示例

```json
{
  "code":1001,
  "msg":"成功修改个人密码"
}
```
# 4-1.用户获取虚拟机申请记录接口

- [x] 前端已完成
- [x] 后端已完成

- **接口说明**: 用于用户申请记录信息
- **请求地址**: `common/applicationInfo`
- **请求方式**: `GET`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
|        |          ||-

返回值名| 返回值 | 参数类型 | 说明
:-|:-:|:-|--
code|返回码|number|可能值：1001,4001
msg|信息|string|获取申请记录信息成功/网络错误
data|数据|Array|成功获取：申请记录信息.若失败则为null
&emsp;id|申请记录id|number|
&emsp;sender_id|申请者id|string|
&emsp;apply_time|申请时间|string|
&emsp;finish_time|完成时间|string|
status|申请状态|number|
vm_name|虚拟机名|string|
operate_type|操作类型|number|
detail|详细信息|string|
&emsp;apply_msg|申请消息|string|
&emsp;reply_msg|回复消息|string|

## 返回值示例 

```json
{
  "code":1001,
  "msg":"成功获取申请记录信息",
  "data":[
    
      { 
         "id":1,
         "sendor_id":"16211083",
         "apply_time":"2019/7/12 19:40:50",
         "finish_time":"2019/7/12 19:40:58",
         "status":1,
         "vm_name":"vm1",
         "operate_type":"1",
          "detail":"vmname1_detail",
          "apply_msg":"申请创建",
          "reply_msg":"已撤销",
      },
    {
         "id":2,
         "sendor_id":"16211083",
         "apply_time":"2019/7/22 19:40:50",
         "finish_time":"2019/8/1 19:40:50",
         "status":-1,
         "vm_name":"vm1",
         "operate_type":-1,
          "detail":"",
          "apply_msg":"申请删除",
          "reply_msg":"已拒绝",
    }
  ]
}
```
# 4-2.用户撤销还未处理的虚拟机申请接口

- [x] 前端已完成
- [x] 后端已完成

- **接口说明**: 用于用户撤销未处理的虚拟机申请
- **请求地址**: `common/cancelApplication`
- **请求方式**: `POST`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
 recordId | 申请记录id | number   |    是    |      

返回值名| 返回值 | 说明
:-|:-:|:-
code|返回码|可能值：1001,4001
msg|信息|撤销成功/（失败原因）
data|数据|null

## 返回值示例 

```json
{
  "code": 1001,
  "msg": "撤销成功",
  "data": ""
}
```

# 4-3.用户申请个人虚拟机

- [x] 前端已完成

- [x] 后端已完成

- **接口说明**: 用于用户撤销未处理的虚拟机申请

- **请求地址**: `common/privateVm`

- **请求方式**: `POST`

  

| 请求参数       | 参数名     | 参数类型 | 是否必填 | 说明apply |
| -------------- | ---------- | -------- | :------: | :-------- |
| apply_msg      | 申请信息   | string   |    否    | -         |
| vmconf         | 虚拟机配置 | array    |    是    | -         |
| Name           | 虚拟机名   | string   |    是    |           |
| CPU            | cpu数量    | number   |    是    |           |
| Memory         | 内存       | number   |    是    |           |
| Disk           | 硬盘空间   | number   |    是    |           |
| IsTemplate     | 是否为模板 | bool     |    是    |           |
| GuestFullName  | OS名       | string   |    是    |           |
| TemplateName   | 模板名     | string   |    是    |           |
| AdvancedConfig | 高阶配置   | string   |    是    |           |

| 返回值名 | 返回值 | 说明                  |
| :------- | :----: | :-------------------- |
| code     | 返回码 | 可能值：1001,4001     |
| msg      |  信息  | 申请成功/（失败原因） |
| data     |  数据  | null                  |

## 请求值示例 

```json
{
  "apply_msg":"conf测试",
  "vmconf":{
	  			"Name":"testxzy",
    			"CPU":2,
   				"Memory":100,
    			"Disk":1000,
    			"IsTemplate":false,
    			"GuestFullName":"xzy",
    			"TemplateName":"",
    			"AdvancedConfig":""
            }
}
```



## 返回值示例 

```json
{
  "code": 1001,
  "msg": "申请成功",
  "data": ""
}
```

# 4-4.用户申请删除个人虚拟机

- [x] 前端已完成
- [x] 后端已完成
- **接口说明**: 用于用户撤销未处理的虚拟机申请
- **请求地址**: `common/deleteSingleVM`
- **请求方式**: `POST`

| 请求参数  | 参数名     | 参数类型 | 是否必填 | 说明 |
| --------- | ---------- | -------- | :------: | :--- |
| vm_name   | 虚拟机名称 | string   |    是    |      |
| apply_msg | 申请消息   | string   |    否    |      |

| 返回值名 | 返回值 | 说明                    |
| :------- | :----: | :---------------------- |
| code     | 返回码 | 可能值：1001,2002，4001 |
| msg      |  信息  | 撤销成功/（失败原因）   |
| data     |  数据  | null                    |

## 返回值示例 

```json
{
  "code": 1001,
  "msg": "申请成功",
  "data": ""
}
```

# 4-5.用户申请批量删除虚拟机

- [x] 前端已完成
- [x] 后端已完成
- **接口说明**: 用于用户撤销未处理的虚拟机申请
- **请求地址**: `common/deleteVMList`
- **请求方式**: `POST`

| 请求参数  | 参数名     | 参数类型 | 是否必填 | 说明 |
| --------- | ---------- | -------- | :------: | :--- |
| vm_name   | 虚拟机名称 | Array    |    是    |      |
| apply_msg | 申请消息   | string   |    否    |      |

| 返回值名 | 返回值 | 说明                    |
| :------- | :----: | :---------------------- |
| code     | 返回码 | 可能值：1001,2002，4001 |
| msg      |  信息  | 撤销成功/（失败原因）   |
| data     |  数据  | null                    |

## 请求示例 

```json
{
  "vm_name": ['vm1','vm2','vm3'],
  "apply_msg": "请求删除",
  "data": ""
}
```

# 

## 返回值示例 

```json
{
  "code": 1001,
  "msg": "申请成功",
  "data": ""
}
```
# 1.上传作业

- [ ] 前端已完成
- [x] 后端已完成

- **接口说明**: 用于更新作业数据（调用网盘上传文件接口后再调用本接口，重复提交作业也调用本接口）
- **请求地址**: `assignment/upload`
- **请求方式**: `POST`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
作业ID（来自网盘）|file|string|是|-
实验ID|exp_id|int|是|

返回值名| 返回值 | 说明
:-|:-:|:-
code|返回码|可能值：1001,2001,2002,4001
msg|信息|提交作业成功（或重新提交作业成功）/未登录账户/未获取到访问权限/内部错误，请联系管理员
data|数据|null

## 返回值示例

```json
{
  "code":1001,
  "msg":"成功提交作业",
  "data":null
}
```

# 2.下载作业

- [ ] 前端已完成
- [x] 后端已完成

- **接口说明**: 用于获取作业的文件id（调用本接口后再调用网盘的下载文件接口）
- **请求地址**: `assignment/download`
- **请求方式**: `POST`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
学生id|user_id|string|是|-
实验ID|exp_id|int|是|

返回值名| 返回值 | 说明
:-|:-:|:-
code|返回码|可能值：1001,2002,3001,4001
msg|信息|作业成功/未获取到访问权限/未找到该作业/内部错误，请联系管理员
data|数据|null

## 返回值示例

```json
{
  "code":1001,
  "msg":"成功",
  "data":null
}
```

# 3.上传作业文件

- [ ] 前端已完成
- [x] 后端已完成

- **接口说明**: 上传作业文件（先调用本接口再调用上传文件接口）
- **请求地址**: `:8015/uploadFileByParent`
- **请求方式**: `POST`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
id|id|string|是|暂时为固定值,14211054
type|type|int|是|暂时为固定值,2
parent|parent|是|暂时为固定值,1b44a1f8-5061-4de1-8a49-58de3fff2fd4
文件|file|文件类型|是

返回值名| 返回值 | 说明
:-|:-:|:-
code|返回码|可能值：1001,2001,2002,4001
msg|信息|ok/error
data|数据|若成功则为文件id

## 返回值示例

```json
{
    "code": 1001,
    "data":"27630603-bb04-45c1-a63f-ea4d57c2ec71",
    "msg": "ok"
}
```

# 3.下载作业文件

- [ ] 前端已完成
- [x] 后端已完成

- **接口说明**: 上传作业文件（先调用本接口再调用上传文件接口）
- **请求地址**: `:8015/DownloadFileByFileId`
- **请求方式**: `POST`

请求参数 | 参数名 | 参数类型 | 是否必填 | 说明
-|-|-|:-:|:-
id|id|string|是|暂时为固定值,14211054
type|type|int|是|暂时为固定值,2
文件ID|fileId|string|是|要下载的文件id

返回值名| 返回值 | 说明
:-|:-:|:-
-|文件|直接返回文件
